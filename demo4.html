<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æ¡Œçƒæ¯”è³½è¨˜åˆ†æ¿</title>
<style>
  body { font-family: Arial; padding: 20px; background-color: #f5f5f5; }
  .header { text-align: center; margin-bottom: 30px; }
  .header h1 { color: #2c3e50; margin: 0; }
  .input-section { 
    background: white; 
    padding: 20px; 
    border-radius: 10px; 
    margin-bottom: 20px; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  #teamAInput, #teamBInput { padding: 8px; margin: 5px; border: 2px solid #ddd; border-radius: 5px; }
  #setTeamsBtn, #resetBtn, #downloadPdfBtn { 
    padding: 8px 15px; 
    margin: 5px; 
    border: none; 
    border-radius: 5px; 
    cursor: pointer; 
    font-weight: bold;
  }
  #setTeamsBtn { background: #3498db; color: white; }
  #resetBtn { background: #e74c3c; color: white; }
  #downloadPdfBtn { background: #27ae60; color: white; }

  .scoreboard {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    margin-bottom: 20px;
  }

  table { 
    border-collapse: collapse; 
    width: 100%; 
    table-layout: fixed;
  }
  
  th, td { 
    border: 2px solid #34495e; 
    height: 60px; 
    text-align: center; 
    vertical-align: middle; 
    font-weight: bold;
  }
  
  th {
    background: #34495e;
    color: white;
    font-size: 14px;
  }
  
  th:first-child { width: 120px; }
  th:not(:first-child) { width: calc((100% - 120px) / 12); }
  
  .team-row {
    height: 80px;
  }
  
  .team-name {
    background: #2c3e50;
    color: white;
    font-size: 18px;
    font-weight: bold;
  }
  
  .score-cell {
    background: #ecf0f1;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .score-cell:hover {
    background: #d5dbdb;
  }
  
  .score-cell.scored {
    background: #2ecc71;
    color: white;
  }
  
  .score-cell.scored.deuce {
    background: #f1c40f !important;
    color: #000 !important;
  }
  
  .score-cell.scored.match-point {
    background: #e74c3c !important;
    color: white !important;
  }
  
  .score-cell.scored::after {
    content: "âœ“";
    font-size: 24px;
    font-weight: bold;
  }
  
  .color-buttons {
    display: flex;
    gap: 3px;
    margin-top: 3px;
  }
  
  .color-btn {
    width: 20px;
    height: 20px;
    border: 2px solid #ddd;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .color-btn:hover {
    border-color: #000;
    transform: scale(1.1);
  }
  
  .color-btn.selected {
    border-color: #000;
    border-width: 3px;
    transform: scale(1.1);
  }

  .results-container { 
    display: flex; 
    gap: 30px; 
    align-items: flex-start; 
  }
  
  .result-section, .chart-section { 
    flex: 1;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  .result-display {
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    padding: 20px;
    border-radius: 10px;
    margin-top: 10px;
  }
  
  .result-tie {
    background: #f39c12;
    color: white;
  }
  
  .result-leading {
    background: #3498db;
    color: white;
  }
  
  .result-win {
    background: #e74c3c;
    color: white;
    animation: pulse 2s infinite;
  }
  
  .result-deuce {
    background: #9b59b6;
    color: white;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
</style>
</head>
<body>

<div class="header">
  <h1>ğŸ“ æ¡Œçƒæ¯”è³½è¨˜åˆ†æ¿</h1>
</div>

<div class="input-section">
  <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
    <div>
      <input type="text" id="teamAInput" placeholder="è¼¸å…¥éšŠä¼Aåç¨±" maxlength="10">
      <div style="margin-top: 5px;">
        <span style="font-size: 12px; color: #666;">éšŠä¼Aé¡è‰²ï¼š</span>
        <div class="color-buttons" id="teamAColors">
          <button class="color-btn" data-color="#e74c3c" style="background: #e74c3c;" onclick="setTeamColor('A', '#e74c3c')"></button>
          <button class="color-btn" data-color="#f39c12" style="background: #f39c12;" onclick="setTeamColor('A', '#f39c12')"></button>
          <button class="color-btn" data-color="#f1c40f" style="background: #f1c40f;" onclick="setTeamColor('A', '#f1c40f')"></button>
          <button class="color-btn" data-color="#27ae60" style="background: #27ae60;" onclick="setTeamColor('A', '#27ae60')"></button>
          <button class="color-btn" data-color="#3498db" style="background: #3498db;" onclick="setTeamColor('A', '#3498db')"></button>
          <button class="color-btn" data-color="#e91e63" style="background: #e91e63;" onclick="setTeamColor('A', '#e91e63')"></button>
          <button class="color-btn" data-color="#9b59b6" style="background: #9b59b6;" onclick="setTeamColor('A', '#9b59b6')"></button>
        </div>
      </div>
    </div>
    
    <div>
      <input type="text" id="teamBInput" placeholder="è¼¸å…¥éšŠä¼Båç¨±" maxlength="10">
      <div style="margin-top: 5px;">
        <span style="font-size: 12px; color: #666;">éšŠä¼Bé¡è‰²ï¼š</span>
        <div class="color-buttons" id="teamBColors">
          <button class="color-btn" data-color="#e74c3c" style="background: #e74c3c;" onclick="setTeamColor('B', '#e74c3c')"></button>
          <button class="color-btn" data-color="#f39c12" style="background: #f39c12;" onclick="setTeamColor('B', '#f39c12')"></button>
          <button class="color-btn" data-color="#f1c40f" style="background: #f1c40f;" onclick="setTeamColor('B', '#f1c40f')"></button>
          <button class="color-btn" data-color="#27ae60" style="background: #27ae60;" onclick="setTeamColor('B', '#27ae60')"></button>
          <button class="color-btn" data-color="#3498db" style="background: #3498db;" onclick="setTeamColor('B', '#3498db')"></button>
          <button class="color-btn" data-color="#e91e63" style="background: #e91e63;" onclick="setTeamColor('B', '#e91e63')"></button>
          <button class="color-btn" data-color="#9b59b6" style="background: #9b59b6;" onclick="setTeamColor('B', '#9b59b6')"></button>
        </div>
      </div>
    </div>
    
    <div>
      <button id="setTeamsBtn">è¨­å®šéšŠä¼</button>
      <button id="resetBtn">é‡ç½®æ¯”è³½</button>
      <button id="downloadPdfBtn">ä¸‹è¼‰ PDF</button>
    </div>
  </div>
</div>

<div class="scoreboard">
  <table id="scoreTable">
    <thead>
      <tr>
        <th>å¾—åˆ†</th>
        <th>1</th>
        <th>2</th>
        <th>3</th>
        <th>4</th>
        <th>5</th>
        <th>6</th>
        <th>7</th>
        <th>8</th>
        <th>9</th>
        <th>10</th>
        <th>11</th>
        <th>12</th>
      </tr>
    </thead>
    <tbody>
      <tr class="team-row">
        <td class="team-name" id="teamAName">éšŠä¼A</td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 1)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 2)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 3)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 4)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 5)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 6)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 7)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 8)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 9)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 10)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 11)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'A', 12)"></td>
      </tr>
      <tr class="team-row">
        <td class="team-name" id="teamBName">éšŠä¼B</td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 1)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 2)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 3)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 4)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 5)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 6)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 7)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 8)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 9)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 10)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 11)"></td>
        <td class="score-cell" onclick="toggleScore(this, 'B', 12)"></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="results-container">
  <div class="result-section">
    <h3>ğŸ† æ¯”è³½çµæœ</h3>
    <div id="resultDisplay" class="result-display result-tie">
      å°šæœªé–‹å§‹æ¯”è³½
    </div>
  </div>
  <div class="chart-section">
    <h3>ğŸ“Š å¾—åˆ†çµ±è¨ˆ</h3>
    <canvas id="barChart" width="400" height="300"></canvas>
  </div>
</div>

<!-- å¼•å…¥ js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const setTeamsBtn = document.getElementById('setTeamsBtn');
const resetBtn = document.getElementById('resetBtn');
const downloadBtn = document.getElementById('downloadPdfBtn');
const teamAInput = document.getElementById('teamAInput');
const teamBInput = document.getElementById('teamBInput');
const teamAName = document.getElementById('teamAName');
const teamBName = document.getElementById('teamBName');
const resultDisplay = document.getElementById('resultDisplay');

let teamAScore = 0;
let teamBScore = 0;
let gameEnded = false;
let teamAColor = '#3498db';
let teamBColor = '#e74c3c';

// æª¢æŸ¥æ¯”è³½æ˜¯å¦çµæŸ
function checkGameEnd() {
  return ((teamAScore >= 11 && teamAScore - teamBScore >= 2) || 
          (teamBScore >= 11 && teamBScore - teamAScore >= 2) || 
          teamAScore >= 12 || teamBScore >= 12);
}

// è¨­å®šéšŠä¼é¡è‰²
function setTeamColor(team, color) {
  if (team === 'A') {
    teamAColor = color;
    // æ›´æ–°é¡è‰²æŒ‰éˆ•é¸ä¸­ç‹€æ…‹
    document.querySelectorAll('#teamAColors .color-btn').forEach(btn => {
      btn.classList.toggle('selected', btn.dataset.color === color);
    });
  } else {
    teamBColor = color;
    // æ›´æ–°é¡è‰²æŒ‰éˆ•é¸ä¸­ç‹€æ…‹
    document.querySelectorAll('#teamBColors .color-btn').forEach(btn => {
      btn.classList.toggle('selected', btn.dataset.color === color);
    });
  }
  
  // æ›´æ–°å·²ç¶“å¾—åˆ†çš„æ ¼å­é¡è‰²
  updateScoreCellColors();
  updateChart();
}

// æ›´æ–°è¨˜åˆ†æ¿æ ¼å­é¡è‰²
function updateScoreCellColors() {
  const teamARow = document.querySelector('#scoreTable tbody tr:first-child');
  const teamBRow = document.querySelector('#scoreTable tbody tr:last-child');
  
  // æ›´æ–°éšŠä¼Açš„æ ¼å­
  teamARow.querySelectorAll('.score-cell.scored').forEach((cell, index) => {
    const score = index + 1;
    if (teamAScore >= 10 && teamBScore >= 10) {
      if (score === 10) {
        cell.className = 'score-cell scored deuce';
      } else if (score >= 11) {
        cell.className = 'score-cell scored match-point';
      } else {
        cell.style.backgroundColor = teamAColor;
      }
    } else {
      cell.style.backgroundColor = teamAColor;
      cell.className = 'score-cell scored';
    }
  });
  
  // æ›´æ–°éšŠä¼Bçš„æ ¼å­
  teamBRow.querySelectorAll('.score-cell.scored').forEach((cell, index) => {
    const score = index + 1;
    if (teamAScore >= 10 && teamBScore >= 10) {
      if (score === 10) {
        cell.className = 'score-cell scored deuce';
      } else if (score >= 11) {
        cell.className = 'score-cell scored match-point';
      } else {
        cell.style.backgroundColor = teamBColor;
      }
    } else {
      cell.style.backgroundColor = teamBColor;
      cell.className = 'score-cell scored';
    }
  });
}

// è¨­å®šéšŠä¼åç¨±
setTeamsBtn.addEventListener('click', () => {
  const nameA = teamAInput.value.trim();
  const nameB = teamBInput.value.trim();
  
  if (nameA) teamAName.textContent = nameA;
  if (nameB) teamBName.textContent = nameB;
  
  teamAInput.value = '';
  teamBInput.value = '';
  
  updateResult();
  updateChart();
});

// é‡ç½®æ¯”è³½
resetBtn.addEventListener('click', function() {
  console.log('é‡ç½®æŒ‰éˆ•è¢«é»æ“Š');
  
  console.log('é–‹å§‹é‡ç½®');
  
  // é‡ç½®è®Šæ•¸
  teamAScore = 0;
  teamBScore = 0;
  gameEnded = false;
  teamAColor = '#3498db';
  teamBColor = '#e74c3c';
  
  // é‡ç½®éšŠä¼åç¨±ç‚ºé è¨­å€¼
  teamAName.textContent = 'éšŠä¼A';
  teamBName.textContent = 'éšŠä¼B';
  
  // é‡ç½®é¡è‰²æŒ‰éˆ•é¸ä¸­ç‹€æ…‹
  document.querySelectorAll('.color-btn').forEach(btn => {
    btn.classList.remove('selected');
  });
  document.querySelector('#teamAColors .color-btn[data-color="#3498db"]').classList.add('selected');
  document.querySelector('#teamBColors .color-btn[data-color="#e74c3c"]').classList.add('selected');
  
  // æ¸…é™¤æ‰€æœ‰å‹¾é¸
  const scoreCells = document.querySelectorAll('.score-cell');
  console.log('æ‰¾åˆ°æ ¼å­æ•¸é‡:', scoreCells.length);
  
  scoreCells.forEach(function(cell, index) {
    console.log('é‡ç½®æ ¼å­', index, 'åŸæœ¬æœ‰scoredé¡åˆ¥:', cell.classList.contains('scored'));
    
    // ç§»é™¤æ‰€æœ‰ç›¸é—œé¡åˆ¥
    cell.classList.remove('scored', 'deuce', 'match-point');
    
    // é‡ç½®ç‚ºåŸæœ¬çš„æ¨£å¼ - ç§»é™¤inline styleè®“CSSç”Ÿæ•ˆ
    cell.style.backgroundColor = '';
    cell.style.color = '';
    
    // æ¸…ç©ºå…§å®¹
    cell.innerHTML = '';
    
    console.log('é‡ç½®å¾Œæœ‰scoredé¡åˆ¥:', cell.classList.contains('scored'));
  });
  
  // é‡ç½®çµæœé¡¯ç¤º
  resultDisplay.textContent = 'å°šæœªé–‹å§‹æ¯”è³½';
  resultDisplay.className = 'result-display result-tie';
  
  updateResult();
  updateChart();
  console.log('é‡ç½®å®Œæˆï¼ŒteamAScore:', teamAScore, 'teamBScore:', teamBScore);
});

// åˆ‡æ›å¾—åˆ†
function toggleScore(cell, team, score) {
  const isScored = cell.classList.contains('scored');
  
  if (isScored) {
    // å–æ¶ˆå¾—åˆ† - åªèƒ½å–æ¶ˆæœ€é«˜åˆ†
    if (!canUnscore(team, score)) {
      alert('åªèƒ½å–æ¶ˆç›®å‰çš„æœ€é«˜å¾—åˆ†ï¼');
      return;
    }
    
    cell.classList.remove('scored');
    cell.classList.remove('deuce');
    cell.classList.remove('match-point');
    cell.style.backgroundColor = '';
    
    if (team === 'A') teamAScore--;
    else teamBScore--;
    
    // é‡æ–°æª¢æŸ¥æ¯”è³½ç‹€æ…‹
    gameEnded = checkGameEnd();
  } else {
    // æ¯”è³½çµæŸå¾Œä¸èƒ½æ–°å¢å¾—åˆ†ï¼Œåªèƒ½å–æ¶ˆ
    if (gameEnded) {
      alert('æ¯”è³½å·²çµæŸï¼åªèƒ½å–æ¶ˆå¾—åˆ†æˆ–é‡ç½®æ¯”è³½ã€‚');
      return;
    }
    
    // æª¢æŸ¥æ˜¯å¦æŒ‰é †åºå¾—åˆ†
    if (!canScore(team, score)) {
      alert('è«‹æŒ‰é †åºå¾—åˆ†ï¼');
      return;
    }
    
    // å¾—åˆ†
    cell.classList.add('scored');
    
    // è¨­å®šé¡è‰²
    const teamColor = team === 'A' ? teamAColor : teamBColor;
    
    // æª¢æŸ¥æ˜¯å¦æ˜¯10å¹³æˆ–11åˆ†ä»¥ä¸Šçš„æƒ…æ³
    if ((teamAScore >= 9 && teamBScore >= 9) || (teamAScore >= 10 || teamBScore >= 10)) {
      if (score === 10 && ((team === 'A' && teamBScore >= 10) || (team === 'B' && teamAScore >= 10))) {
        cell.classList.add('deuce');
      } else if (score >= 11) {
        cell.classList.add('match-point');
      } else {
        cell.style.backgroundColor = teamColor;
      }
    } else {
      cell.style.backgroundColor = teamColor;
    }
    
    if (team === 'A') teamAScore++;
    else teamBScore++;
    
    // æª¢æŸ¥æ¯”è³½æ˜¯å¦çµæŸ
    gameEnded = checkGameEnd();
  }
  
  // æ›´æ–°æ‰€æœ‰æ ¼å­çš„é¡è‰²ç‹€æ…‹
  updateScoreCellColors();
  updateResult();
  updateChart();
}

// æª¢æŸ¥æ˜¯å¦å¯ä»¥å¾—åˆ†ï¼ˆå¿…é ˆæŒ‰é †åºï¼‰
function canScore(team, score) {
  const currentScore = team === 'A' ? teamAScore : teamBScore;
  return score === currentScore + 1;
}

// æª¢æŸ¥æ˜¯å¦å¯ä»¥å–æ¶ˆå¾—åˆ†ï¼ˆåªèƒ½å–æ¶ˆæœ€é«˜åˆ†ï¼‰
function canUnscore(team, score) {
  const currentScore = team === 'A' ? teamAScore : teamBScore;
  return score === currentScore;
}

// æ›´æ–°æ¯”è³½çµæœ
function updateResult() {
  const teamA = teamAName.textContent;
  const teamB = teamBName.textContent;
  
  // æ¸…é™¤æ‰€æœ‰æ¨£å¼é¡åˆ¥
  resultDisplay.className = 'result-display';
  
  // åˆ¤æ–·æ¯”è³½çµæœ
  if (teamAScore === 0 && teamBScore === 0) {
    resultDisplay.textContent = 'å°šæœªé–‹å§‹æ¯”è³½';
    resultDisplay.classList.add('result-tie');
  }
  // æª¢æŸ¥æ˜¯å¦æœ‰äººç²å‹
  else if ((teamAScore >= 11 && teamAScore - teamBScore >= 2) || 
           (teamAScore >= 12)) {
    resultDisplay.textContent = `${teamA} ç²å‹ æ¯”è³½çµæŸ`;
    resultDisplay.classList.add('result-win');
    gameEnded = true;
  }
  else if ((teamBScore >= 11 && teamBScore - teamAScore >= 2) || 
           (teamBScore >= 12)) {
    resultDisplay.textContent = `${teamB} ç²å‹ æ¯”è³½çµæŸ`;
    resultDisplay.classList.add('result-win');
    gameEnded = true;
  }
  // é›™æ–¹éƒ½é”åˆ°10åˆ†ä»¥ä¸Š
  else if (teamAScore >= 10 && teamBScore >= 10) {
    if (teamAScore === teamBScore) {
      if (teamAScore === 10 && teamBScore === 10) {
        resultDisplay.textContent = 'æš«æ™‚å¹³æ‰‹ å†çˆ­å…©åˆ†';
      } else {
        resultDisplay.textContent = 'æš«æ™‚å¹³æ‰‹ å†çˆ­ä¸€åˆ†';
      }
      resultDisplay.classList.add('result-deuce');
    } else if (teamAScore > teamBScore) {
      resultDisplay.textContent = `${teamA} æš«æ™‚é ˜å…ˆ`;
      resultDisplay.classList.add('result-leading');
    } else {
      resultDisplay.textContent = `${teamB} æš«æ™‚é ˜å…ˆ`;
      resultDisplay.classList.add('result-leading');
    }
  }
  // å°šæœªé”åˆ°10åˆ†
  else {
    if (teamAScore === teamBScore) {
      resultDisplay.textContent = 'æš«æ™‚å¹³æ‰‹';
      resultDisplay.classList.add('result-tie');
    } else if (teamAScore > teamBScore) {
      resultDisplay.textContent = `${teamA} æš«æ™‚é ˜å…ˆ`;
      resultDisplay.classList.add('result-leading');
    } else {
      resultDisplay.textContent = `${teamB} æš«æ™‚é ˜å…ˆ`;
      resultDisplay.classList.add('result-leading');
    }
  }
}

// é•·æ¢åœ–
const barCtx = document.getElementById('barChart').getContext('2d');
const barChart = new Chart(barCtx, {
    type: 'bar',
    data: { 
        labels: [], 
        datasets: [{ 
            label: 'å¾—åˆ†',
            data: [], 
            backgroundColor: []
        }] 
    },
    options: { 
        indexAxis: 'y',
        responsive: false, 
        scales: {
            x: {
                beginAtZero: true,
                max: 12,
                ticks: {
                    stepSize: 1
                }
            }
        },
        plugins: { 
            legend: { 
                display: false 
            } 
        }
    }
});

// æ›´æ–°åœ–è¡¨
function updateChart() {
  const teamA = teamAName.textContent;
  const teamB = teamBName.textContent;
  
  const labels = [teamA, teamB];
  const data = [teamAScore, teamBScore];
  const colors = [teamAColor, teamBColor];
  
  barChart.data.labels = labels;
  barChart.data.datasets[0].data = data;
  barChart.data.datasets[0].backgroundColor = colors;
  barChart.update();
}

// PDF ä¸‹è¼‰
downloadBtn.addEventListener('click', () => {
  // å»ºç«‹è¦åŒ¯å‡ºçš„å…§å®¹å€åŸŸ
  const exportContent = document.createElement('div');
  exportContent.style.padding = '20px';
  exportContent.style.backgroundColor = 'white';
  
  // æ¨™é¡Œ
  const title = document.createElement('h1');
  title.textContent = 'ğŸ“ æ¡Œçƒæ¯”è³½è¨˜åˆ†æ¿';
  title.style.textAlign = 'center';
  title.style.marginBottom = '30px';
  title.style.color = '#2c3e50';
  exportContent.appendChild(title);
  
  // è¨˜åˆ†æ¿
  const scoreboardClone = document.querySelector('.scoreboard').cloneNode(true);
  exportContent.appendChild(scoreboardClone);
  
  // æ¯”è³½çµæœå€åŸŸ
  const resultSection = document.createElement('div');
  resultSection.style.marginTop = '30px';
  resultSection.style.textAlign = 'center';
  
  const resultTitle = document.createElement('h3');
  resultTitle.textContent = 'ğŸ† æ¯”è³½çµæœ';
  resultTitle.style.marginBottom = '15px';
  resultSection.appendChild(resultTitle);
  
  const resultClone = document.getElementById('resultDisplay').cloneNode(true);
  resultClone.style.display = 'inline-block';
  resultClone.style.minWidth = '300px';
  resultSection.appendChild(resultClone);
  
  exportContent.appendChild(resultSection);
  
  // å¾—åˆ†çµ±è¨ˆå€åŸŸ
  const chartSection = document.createElement('div');
  chartSection.style.marginTop = '30px';
  chartSection.style.textAlign = 'center';
  
  const chartTitle = document.createElement('h3');
  chartTitle.textContent = 'ğŸ“Š å¾—åˆ†çµ±è¨ˆ';
  chartTitle.style.marginBottom = '15px';
  chartSection.appendChild(chartTitle);
  
  // å»ºç«‹ç°¡å–®çš„å¾—åˆ†çµ±è¨ˆè¡¨æ ¼
  const statsTable = document.createElement('table');
  statsTable.style.margin = '0 auto';
  statsTable.style.borderCollapse = 'collapse';
  statsTable.style.fontSize = '18px';
  
  const statsRow = document.createElement('tr');
  
  const teamACell = document.createElement('td');
  teamACell.textContent = teamAName.textContent;
  teamACell.style.padding = '15px 30px';
  teamACell.style.border = '2px solid #34495e';
  teamACell.style.backgroundColor = teamAColor;
  teamACell.style.color = 'white';
  teamACell.style.fontWeight = 'bold';
  
  const scoreACell = document.createElement('td');
  scoreACell.textContent = teamAScore;
  scoreACell.style.padding = '15px 30px';
  scoreACell.style.border = '2px solid #34495e';
  scoreACell.style.textAlign = 'center';
  scoreACell.style.fontSize = '24px';
  scoreACell.style.fontWeight = 'bold';
  
  const vsCell = document.createElement('td');
  vsCell.textContent = 'VS';
  vsCell.style.padding = '15px 20px';
  vsCell.style.border = '2px solid #34495e';
  vsCell.style.textAlign = 'center';
  vsCell.style.fontWeight = 'bold';
  vsCell.style.backgroundColor = '#ecf0f1';
  
  const scoreBCell = document.createElement('td');
  scoreBCell.textContent = teamBScore;
  scoreBCell.style.padding = '15px 30px';
  scoreBCell.style.border = '2px solid #34495e';
  scoreBCell.style.textAlign = 'center';
  scoreBCell.style.fontSize = '24px';
  scoreBCell.style.fontWeight = 'bold';
  
  const teamBCell = document.createElement('td');
  teamBCell.textContent = teamBName.textContent;
  teamBCell.style.padding = '15px 30px';
  teamBCell.style.border = '2px solid #34495e';
  teamBCell.style.backgroundColor = teamBColor;
  teamBCell.style.color = 'white';
  teamBCell.style.fontWeight = 'bold';
  
  statsRow.appendChild(teamACell);
  statsRow.appendChild(scoreACell);
  statsRow.appendChild(vsCell);
  statsRow.appendChild(scoreBCell);
  statsRow.appendChild(teamBCell);
  statsTable.appendChild(statsRow);
  
  chartSection.appendChild(statsTable);
  exportContent.appendChild(chartSection);
  
  // æš«æ™‚åŠ åˆ°bodyä¸­
  document.body.appendChild(exportContent);
  
  const opt = {
    margin: 0.5,
    filename: 'æ¡Œçƒæ¯”è³½è¨˜åˆ†æ¿.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' }
  };
  
  html2pdf().set(opt).from(exportContent).save().then(() => {
    // PDFç”Ÿæˆå¾Œç§»é™¤è‡¨æ™‚å…ƒç´ 
    document.body.removeChild(exportContent);
  });
});

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  // è¨­å®šé è¨­é¡è‰²é¸ä¸­ç‹€æ…‹
  document.querySelector('#teamAColors .color-btn[data-color="#3498db"]').classList.add('selected');
  document.querySelector('#teamBColors .color-btn[data-color="#e74c3c"]').classList.add('selected');
  
  updateResult();
  updateChart();
  console.log('é é¢åˆå§‹åŒ–å®Œæˆ');
});
</script>

</body>
</html>